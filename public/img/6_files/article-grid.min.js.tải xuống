(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{190:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));var r=n(3),i=n.n(r),a=n(1),c=n.n(a),o=n(8),l=n.n(o),f=n(6),s=n.n(f),u=n(2),d=n.n(u),h=n(16),p=n(28),g=n(13),v=n(30),w=n(7),y=n(5),m=n(4),b=n(95),O=n(69);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s()(this,n)}}var R=function(t){l()(n,t);var e=j(n);function n(t,r){var a;return i()(this,n),(a=e.call(this)).$content=t,a.options=Object(g.a)(a.defaultOptions,r),a.gridSize=a.options.gridSize,a.padding=a.options.padding,a.width=a.options.width,a.$content.hasClass("panorama")||a.$content.find(".twentytwenty-container")?s()(a):(a.init(),a)}return c()(n,[{key:"name",get:function(){return"GridLayoutPlugin"}},{key:"defaultOptions",get:function(){return{gridSize:[2,3],padding:2,width:1440}}}]),c()(n,[{key:"init",value:function(){var t=this;this.$content.width()>=1440&&(this.width=1920);var e=this.$content.findAll("tr");(e=this.$content.hasClass("gallery")?e.filter((function(t){return Object(v.a)(t).findAll("td > img").length>0})):e.filter((function(t){return Object(v.a)(t).findAll("td > img").length>1}))).length>0&&(this.$content.addClass("gallery"),e.forEach((function(e){t.relayoutRow(Object(v.a)(e))})),this.$content.findAll("img").forEach((function(e){Object(v.a)(e).wrap("<div class='photoset-item' style='margin: 0 ".concat(t.padding,"px'></div>"))})),this.calculate(),window.on("resize",(function(){t.calculate()})))}},{key:"relayoutRow",value:function(t){var e=Object(v.a)(t.findAll("img")),n=e.length;if(0!=n)if(1!=n)if(2!=n&&3!=n)if(4==n)t.insertBefore(this.createRow([e[0],e[1]])),this.relayoutRow(t);else{for(var r=Object(w.G)(0,this.gridSize.length-1),i=this.gridSize[r],a=[],c=0;c<i;c++)a.push(e[c]);t.insertBefore(this.createRow(a)),this.relayoutRow(t)}else e.forEach((function(t){var e=t.attr("src");e.search(/\/w\d+\//gi)<0&&e.search(".gif")<0&&t.attr("src",e.replace("/Uploaded/","/w860/Uploaded/"))}));else{var o=(e=e[0]).attr("src");o.search(".gif")<0&&(o.search(/\/w\d+\//gi)<0?e.attr("src",o.replace("/Uploaded/","/w"+this.width+"/Uploaded/")):e.attr("src",o.replace(/\/w\d+\//gi,"/w"+this.width+"/")))}else t.remove()}},{key:"createRow",value:function(t){var e=Object(v.a)(Object(m.b)("<tr><td></td></tr>"));if(y.a.array(t))for(var n=t.length,r=0;r<n;r++)Object(v.a)(e.find("td")).append(t[r].$el);else Object(v.a)(e.find("td")).append(t.$el);return e.$el}},{key:"checkImageLoaded",value:function(t){return Object(b.a)(t,{each:function(t,e,n){var r=Object(v.a)(this);r.is("img")&&(n?r.addClass("loaded"):r.attr("src",r.attr("src")+"#"+Object(O.a)()).addClass("reloaded"))}})}},{key:"calculate",value:function(){var t=this;this.$content.findAll("td:not(.caption)").forEach((function(e){t.checkImageLoaded(e).then((function(e){var n=Object(v.a)(e),r=Object(v.a)(n.findAll("img")),i=Object(v.a)(n.findAll(".photoset-item")),a=n.parents("tr"),c=Object(v.a)(a).width(),o=i.length;if(0!=o){for(var l,f=r.map((function(t){var e=t.attr("width"),n=t.attr("height"),r=t.$el.naturalWidth,i=t.$el.naturalHeight;return e&&e>0&&(r=e),n&&n>0&&(i=n),r/i})),s=0,u=0,d=Math.min.apply(Math,f),h=0;h<o;h++)s+=f[h]/d;var p=(c-(l=2*t.padding*(o-1)))/s,g=Math.floor(p/d),w=0;r.forEach((function(t,e){w=Math.round(g*f[e]),u+=w,t.height(g),t.width(w)}));var y=c-l-(u-w)-1;r[r.length-1].attr("original-width",w).setStyles({width:y+"px"})}}))}))}}]),n}(p.a),$=n(0);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s()(this,n)}}var k=function(t){l()(n,t);var e=A(n);function n(t){var r;return i()(this,n),(r=e.call(this,t.app)).articleInfo=t.artInfo,r.$articleBody=t.artUtils.getArticleBody(),r.init(),r}return c()(n,[{key:"name",get:function(){return"GridsModule"}}]),c()(n,[{key:"init",value:function(){var t=this;this.$articleBody&&this.$articleBody.findAll("table.picture").forEach((function(e){var n=Object(v.a)(e);t.articleInfo.articleType!==$.e.INFOGRAPHIC&&0==n.findAll(".pic > em").length&&new R(n),0==n.findAll("td.caption").length&&n.addClass("nocaption")}))}}]),n}(h.a)},91:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(91),i=n(30),a=n(38);function c(t,e){var n,c=Object(a.a)(),o=0,l=e.finished,f=e.each;l=l||r.a,f=f||r.a;var s=[];return Object(i.a)(t).findAll("img").forEach((function(t){s.push({src:t.src,element:t})})),n=s.length,o=0,0===n&&(l.call(t),c.resolve(t)),s.forEach((function(e){var r=new Image;function i(a){var s=[o,n,"load"==a.type];if(o++,f.apply(e.element,s),r.off("load.waitForImages",i),r.off("error.waitForImages",i),o==n)return l.call(t),c.resolve(t),!1}r.on("load.waitForImages",i),r.on("error.waitForImages",i),r.src=e.src})),c.promise}}}]);